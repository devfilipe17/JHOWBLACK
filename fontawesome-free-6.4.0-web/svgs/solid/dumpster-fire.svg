!=0&&(u=s.concat(o));let f=[];if(n.config.enableStaticGroupRanking&&u.length>0&&n.getGroupType(u[0])!=n.GroupType.SearchSuggestions){let t=[{type:n.GroupType.Apps},{type:n.GroupType.Settings},{type:n.GroupType.Documents,source:1}];n.config.topHitMuse&&(t=[{type:n.GroupType.Apps},{type:n.GroupType.AnaheimDataTopHit},{type:n.GroupType.Settings},{type:n.GroupType.Documents,source:1}]);for(let i of t)e.some(t=>n.sameGroup(t,i))&&f.push(i);e.some(t=>n.sameGroup(t,{type:n.GroupType.SearchSuggestions}))&&f.push({type:n.GroupType.SearchSuggestions})}for(let i of u){let u=n.getGroupType(i,t===null||t===void 0?void 0:t.scope),r=this.getTypeWithSource(u,i);f.some(t=>n.sameGroup(t,r))||(!n.config.enableStaticGroupRanking||!n.isTopHitChildGroup(r)||i.handoffType===21?f.push(r):f.unshift(r))}return f}getTypeWithSource(t,i){const r=t==n.GroupType.MRUHistory?undefined:i.sourceForGroup;return{type:t,source:r}}addChildSuggestions(t,i,r){i.calculateChildSuggestions&&i.calculateChildSuggestions();i.childSuggestions&&i.childSuggestions.length>0&&Object.keys(n.config.topHitChildGroups).forEach((n,u)=>{const f=parseInt(n),e=this.getMaxChildSuggestions(t,i,f);if(e>0){const n=i.childSuggestions.filter(n=>n.groupType==f).slice(0,e);n.forEach((n,t)=>{n.handoffType===21||(n.rankingScore=1e4-100*u-t),r.push(n)})}})}getMaxChildSug